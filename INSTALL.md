# Transitlounge Laravel Setup

## Basic setup
```zsh
# create a new project
laravel new transitlounge

# initiate the git repo
init git /add/commit

# setup tailwind frontend presets and Laravel UI scaffolding
composer require laravel-frontend-presets/tailwindcss --dev
php artisan ui tailwindcss --auth

# install the node packages and compile the scaffolding
npm install && npm run dev

# Create default database
touch database/database.sqlite

# Copy .env from example if not present
cp .env-example .env

# Set DB to sqlite and remove the rest of the DB variables (i.e. DB_DATABASE)
DB_CONNECTION=sqlite

# Migrate database
php artisan migrate

```

## VUE

```zsh
# install vue
npm install vue --save-dev`
```

You can run `php artisan ui vue` but know that there is a lot of extra stuf that gets added such as jquery and bootstrap. If you do, Make sure you have a clean repo so you see the changes. Easiest is to just set the Laravel vue scafoolding manually frm an example.

## SEED
Set the user seeder
```php
$password = Hash::make('Welkom0611');
$marijn = User::create([
	'name' => 'marijn',
	'email' => 'marijn@transitlounge.one',
	'email_verified_at' => now(),
	'password' => $password,
	'remember_token' => Str::random(10),
]);
```

```zsh
# refresh the database and seed the tables
php artisan migrate:refresh --seed

# Or just run the specific seed
php artisan db:seed --class=UserSeeder
```

## STORAGE
Prepare to save your images in `storage/app/public/images` and update the filesystem config in `config/filesystem.php`
```php
'links' => [
    public_path('images') => storage_path('app/public/images'),
],
```
then run:

`php artisan storage:link`

## DEBUGBAR
```bash
# Install de debugbar
composer require barryvdh/laravel-debugbar --dev

# Generate the config file
php artisan vendor:publish --provider="Barryvdh\Debugbar\ServiceProvider"

# Update the .env file to give extra control
DEBUGBAR_ENABLED=true
```

## IDE HELPER
Vscode does not recognize Laravel facedes, to help it work best with Laravel install IDE Helper
```zsh
# Installl package
composer require --dev barryvdh/laravel-ide-helper

# Generate the setup files
php artisan ide-helper:generate
php artisan ide-helper:meta
php artisan ide-helper:models --nowrite
```
Optionally add the files to gitignore and let them be generated by updating composer.json

```json
"post-create-project-cmd": [
	"@php artisan key:generate --ansi",
	"@php artisan ide-helper:generate",
	"@php artisan ide-helper:meta",
	"@php artisan ide-helper:models --nowrite"
]
```

## OPTIMIZATION

### PURGECSS
For production we want to remove all unsued ctailwind classes. Details can be read in [this article](https://medium.com/@wearethreebears/using-purgecss-to-remove-unused-tailwind-classes-with-laravel-mix-92dffba21ed7)

`npm install laravel-mix-purgecss --save-dev`



## GIT FORK UPSTREAM
We want this transitlounge/laravel fork to follow changes in laravel/laravel origonal repo
we setup the upsteam first:

```zsh
git checkout master
git remote -v
git remote add upstream https://github.com/laravel/laravel.git
OR
git remote set-url upstream https://github.com/laravel/laravel.git
git remote -v
```
Then we fetch the changes, deal with any conflicts and merge

`git fetch upstream`

Merge upstream with the appropriate local branch

`git merge upstream/master ( maybe need to add: --allow-unrelated-histories)`

and push

`git push origin master`

## NEW REPO
### pull
```zsh
mkdir
git init
git pull https://github.com/transitlounge/laravel.git master
git remote add origin https://github.com/transitlounge/wuji.git
git push -u origin master
git remote add upstream https://github.com/transitlounge/laravel.git
git fetch upstream
git merge upstream/master

# when changes
git pull upstream master

```


### Github Template

```
git clone https://github.com/transitlounge/test.git
git remote add upstream https://github.com/transitlounge/laravel.git
git fetch upstream --allow-unrelated-histories
git merge upstream/master (first time add the --allow-unrelated-histories flag)
```

don't think you can savely do `git pull upstream master --allow-unrelated-histories`

